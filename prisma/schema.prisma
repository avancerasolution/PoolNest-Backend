// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://admin:admin123@localhost:5432/mydb"
}

enum Role {
  Client
  SuperAdmin
  Admin
  Technician
}

model User {
  id                      String          @id @default(uuid())
  email                   String          @unique
  first_name              String
  last_name               String
  username                String          @unique
  user_type               Role //enum 
  password                String
  color_code              String?
  isSuperAdmin            Boolean
  see_other_tech          Boolean?
  manage_admin_panel      Boolean?
  manage_general_settings Boolean?
  manage_route_stops      Boolean?
  rearrange_routes        Boolean?
  admin_id                String?
  admin                   User?           @relation("AdminToTechnician", fields: [admin_id], references: [id])
  Technicians             User[]          @relation("AdminToTechnician")
  Customer                Customer[]
  WorkOrderType           WorkOrderType[]
  createdAt               DateTime        @default(now()) // * default value (now)
  updatedAt               DateTime        @updatedAt
  Reading                 Reading[]
  Dosage                  Dosage[]
}

model Customer {
  customer_id         String   @id @default(uuid())
  admin_id            String
  admin               User     @relation(fields: [admin_id], references: [id])
  first_name          String
  last_name           String
  city                String
  state               String
  zipcode             String
  email               String   @unique
  mobile_no_primary   String
  mobile_no_secondary String?
  company_name        String?
  company_address     String?
  billing_address     String?
  billing_details     String?
  createdAt           DateTime @default(now()) // * default value (now)
  updatedAt           DateTime @updatedAt
}

model WorkOrderType {
  work_order_type_id     String         @id @default(uuid())
  admin_id               String
  admin                  User           @relation(fields: [admin_id], references: [id])
  name                   String
  color_code             String
  recurrence             String
  labor_cost             Float
  estimated_time_in_mins Int
  default_email_subject  String
  default_email_message  String
  check_list             String[]
  needs_invoiced         Boolean
  alert_office           Boolean
  photo_required         Boolean
  email_to_customer      Boolean
  allow_tech             Boolean
  userId                 Int?
  ShoppingItem           ShoppingItem[]
  createdAt              DateTime       @default(now()) // * default value (now)
  updatedAt              DateTime       @updatedAt
}

model ShoppingItem {
  shopping_item_id   String         @id @default(uuid())
  work_order_type    WorkOrderType? @relation(fields: [work_order_type_id], references: [work_order_type_id])
  work_order_type_id String?
  description        String
  purchased          Boolean
  item_type          String
  assigned_to        String
  product_images     String[]
  createdAt          DateTime       @default(now()) // * default value (now)
  updatedAt          DateTime       @updatedAt
}

model Dosage {
  dosage_id             String  @id @default(uuid())
  admin_id              String
  admin                 User    @relation(fields: [admin_id], references: [id])
  name                  String
  description           String
  unit_of_measurement   String
  cost_per_unit         Int
  include_service_price Boolean
  price_per_unit        Int
  values                Int[]
}

model Reading {
  reading_id          String @id @default(uuid())
  admin_id            String
  admin               User   @relation(fields: [admin_id], references: [id])
  name                String
  description         String
  unit_of_measurement String
  values              Int[]
}
